<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1><%= title %></h1>
    <p>Welcome to the drawngle</p>
    <button id="setRed">Red</button><button id="setBlue">Blue</button>
    <br/>
    <canvas id="drawCanvas" width="400" height="400"></canvas>

    <script>
      var canvas = document.getElementById('drawCanvas');
      var context = canvas.getContext('2d');
      var lastPos = {}, color = '#880000';
    
      document.getElementById('setRed').onclick = function () {
        color = '#880000';
      };
      document.getElementById('setBlue').onclick = function () {
        color = '#000088';
      };

      canvas.onmousemove = function (e) {
        if (!e.which){
          lastPos = {};
          return;
        }
        var rect = this.getBoundingClientRect(),
          x = e.clientX - rect.left,
          y = e.clientY - rect.top;
        if (lastPos.x) {
          context.beginPath();
          context.strokeStyle = color;
          context.lineCap = 'round';
          context.moveTo(lastPos.x, lastPos.y);
          context.lineTo(x, y);
          context.stroke();
        }
        lastPos.x = x;
        lastPos.y = y;
      };
    </script>
  </body>
</html>
